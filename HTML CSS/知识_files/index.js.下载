define("nowcoder/1.2.1225/javascripts/site/discuss/terminal/index",["nc","cpn","ncPlugin/highlighter/highlighter","../../../util/util","ncpc"],function(c,n,i){var t=c("nc"),o=(c("cpn"),t.$,t.Sys),l=t.Base,e=c("ncPlugin/highlighter/highlighter"),a=c("../../../util/util");o.ready({initialize:function g(){var n=this;l.copy(n,window,["post","comment","pageInfo"]),n.comment.draft=(n.comment.draft||{}).content||"",n.globalInfo=l.clone(window.globalInfo),n.initModule(),e.init()},initModule:function s(){var i=this,t=a.getNavHeight(),o=!!i.globalInfo.ownerId,e=!!i.post.isAdmin;l.forEach(["title","comment","content","share","action","note"],function(n){c.async("./module/"+n,function(n){new n({user:i.globalInfo,post:i.post,comment:i.comment,navHeight:t,info:i.pageInfo,isLogin:!!o,isAdmin:!!e})})})}})});
define("nowcoder/1.2.1225/javascripts/site/discuss/terminal/module/action",["nc","cpn","ncpc","./base","../../../../util/littleAction","../../../../action/contest","../../../../action/note","../../../../core/siteConfig","../../../../action/discuss"],function(t,i,n){var o=t("nc"),l=t("cpn"),a=t("ncpc"),r=o.$,d=o.Base,c=o.Clazz,s=o.Limit,e=o.Dom,f=l.Popup,u=a.PopupMsg,p=a.PopupReport,w=a.Auth,y=t("./base"),m=t("../../../../util/littleAction"),k=t("../../../../action/contest"),h=t("../../../../action/discuss"),v=t("../../../../core/siteConfig"),j=n.exports=c.create();c.mix(j,y,null,{render:function g(){var t=this;t.doc=r(document),t.initInviteAnswer(),t.initSink(),t.initHot(),t.initUnwaring(),t.initHidden(),t.initCertify(),t.initGild(),t.initTop(),t.initDel(),t.initEdit(),t.initReply(),t.initLike(),t.initFollow(),t.initNote(),t.initReport(),t.initSpam(),t.initAllSpam()},initInviteAnswer:function b(){var i=this.data.post;w.click({cls:".js-post-invite-answer",call:function(){t.async("../../../../component/popupSub/popupInviteAnswer",function(t){t.show({postId:i.id})})}})},initSink:function C(){var o=this.data.post;w.click({cls:".js-post-sink",call:function(t,i){var n=i.attr("data-action");({sink:1,unsink:1})[n]&&!s.mark(i)&&h[n]({body:{postId:o.id},call:function(){i.attr("data-action","sink"==n?"unsink":"sink"),i.html("sink"===n?"取消下沉":"下沉")},error:function(t){f.alert(t.msg)},always:function(){s.pause(i)}})}})},initHot:function x(){var o=this.data.post;w.click({cls:".js-post-hot",call:function(t,i){if(!s.mark(i)){var n=i.attr("data-action");h[n]({body:{postId:o.id},call:function(t){i.attr("data-action","hot"===n?"unhot":"hot"),i.html("hot"===n?"取消烫":"加烫")},error:function(t){f.alert(t.msg)},always:function(){s.pause(i)}})}}})},initUnwaring:function I(){var n=this.data.post;w.click({cls:".js-post-unwaring",call:function(t,i){s.mark(i)||h.unWarningPost({body:{postId:n.id},call:function(t){window.location.reload()},error:function(t){f.alert(t.msg)},always:function(){s.pause(i)}})}})},initHidden:function T(){var o=this.data.post;w.click({cls:".js-post-hidden",call:function(t,i){if(!s.mark(i)){var n=i.attr("data-action");h[n]({body:{postId:o.id},call:function(t){i.attr("data-action","hidden"===n?"unhidden":"hidden"),i.html("hidden"===n?"取消隐藏":"隐藏")},error:function(t){f.alert(t.msg)},always:function(){s.pause(i)}})}}})},initCertify:function A(){var a=this.data.post;function t(i,t,n){var o=n.attr("data-action");if(i.action[o]&&!s.mark(n)){var l=i.action[o]||"0";h.updateCertify({body:{postId:a.id,certify:l},call:function(){!function t(){r(".js-post-certify").attr("data-action","certify").html("认证"),r(".js-post-uncertify").attr("data-action","uncertify").html("未认证")}(),i.certify?(n.attr("data-action","dis-certify"==o?"certify":"dis-certify"),n.html("dis-certify"===o?"认证":"取消认证")):(n.attr("data-action","dis-uncertify"==o?"uncertify":"dis-uncertify"),n.html("dis-uncertify"===o?"未认证":"取消未认证"))},error:function(t){f.alert(t.msg)},always:function(){s.pause(n)}})}}w.click({cls:".js-post-certify",call:d.bind(t,null,{certify:!0,action:{certify:"1","dis-certify":"0"}})}),w.click({cls:".js-post-uncertify",call:d.bind(t,null,{certify:!1,action:{uncertify:"2","dis-uncertify":"0"}})})},initGild:function L(){var o=this.data.post;w.click({cls:".js-post-gild",call:function(t,i){var n=i.attr("data-action");({gild:1,ungild:1})[n]&&!s.mark(i)&&h[n]({body:{postId:o.id},call:function(){i.attr("data-action","gild"==n?"ungild":"gild"),i.html("加精"==i.text()?"取消加精":"加精")},error:function(t){f.alert(t.msg)},always:function(){s.pause(i)}})}})},initTop:function D(){var a=this.data.post;w.click({cls:".js-post-top",call:function(t,i){var n=i.attr("data-action");if({top:1,untop:1}[n]&&!s.mark(i)){var o=i.attr("data-all"),l="0"!==o;h[n]({body:{postId:a.id,isTopAll:l},call:function(){var t="top"===n;i.attr("data-action",t?"untop":"top"),i.html(l?t?"取消全站置顶":"全站置顶":t?"取消置顶":"置顶")},error:function(t){f.alert(t.msg)},always:function(){s.pause(i)}})}}})},initDel:function R(){var o=this,n=o.data.post,l=o.data.isAdmin,a=n.isGilded;function c(t,i){f.confirm(t,function(){h.deletePost({body:{id:n.id},call:function(){f.tips("操作成功",function(){window.location.href="/discuss"})},error:function(t){f.alert(t.msg)},always:function(){s.pause(i)}})},function(){s.clear(i)})}w.click({cls:".js-post-del",call:function(t,i){s.mark(i)||(l&&c("删除后这篇帖子将无法恢复，是否确定删除？",i),!l&&a&&function n(t){f.confirm("此帖已被设为精华供网友膜拜，还请手下留情！如果心意已决，请联系管理员删除。",function(){o.sendMsg("请求删除帖子"),s.clear(t)},function(){s.clear(t)})}(i),!l&&!a&&c("辛苦码字，删了就没啦，真的要删吗？",i))}})},initEdit:function S(){var o=this.data,l=o.post;function a(t){if(l.jobId)if(l.editJobUrl){var i=f.confirm("该帖子由系统根据你发布的职位信息自动创建，你可以通过编辑该职位的相关描述，修改相应的内容。",function(){window.location.href=l.editJobUrl});i.okBtn.html("前往编辑"),i.cancelBtn.html("暂不编辑")}else f.alert("该帖子由系统根据发布的职位信息自动创建，暂时无法编辑");else t&&(window.location.href=t)}w.click({cls:".js-post-edit",call:function(t){t.preventDefault();var i=r(t.currentTarget),n=r.trim(i.attr("href"));l.isGilded&&!o.isAdmin?f.confirm("编辑后，加精状态会暂时取消，需要管理员审核，是否继续？",function(){a(n)}):a(n)}})},initReply:function F(){this.data;w.click({cls:".js-post-replay",needLogin:!0,call:function(t){var i=r("div.editor-box").closest("div.module-box");e.scrollToEl({el:i,animation:!0,ext:-r("div.nowcoder-header").height()-10}),e.highLight({el:i})}})},initLike:function B(){var o=this.data.post;function t(t,i){s.mark(i)||k[o.isLiked?"unlike":"like"]({body:{id:o.id,type:o.entityType},call:function(t){var n=t.count||0;d.forEach(r(".js-post-like"),function(t){var i=(t=r(t)).text().replace(o.isLiked?"已赞":"赞",o.isLiked?"赞":"已赞").replace(/\d+/,n);t.html(i)});var i=r(".js-fix-like");i[o.isLiked?"removeClass":"addClass"]("link-green"),i.find("span").html(n),o.isLiked=!o.isLiked},error:function(t){f.alert(t.msg)},always:function(){s.pause(i)}})}w.click({cls:".js-post-like",needLogin:!0,call:t}),w.click({cls:".js-fix-like",needLogin:!0,call:t})},initFollow:function E(){var t=this.data.post,o=r(".js-click-follow, .js-click-unfollow"),l=r(".js-post-follow, .js-post-unfollow"),a=r(".js-fix-follow, .js-fix-unfollow"),c=m.follow({entityId:t.id,entityType:t.entityType,followCls:"js-click-follow",unfollowCls:"js-click-unfollow",followCount:t.followTotal,followCb:d.bind(i,null,!1)}),s=m.follow({entityId:t.id,entityType:t.entityType,followCls:"js-post-follow",unfollowCls:"js-post-unfollow",followCount:t.followTotal,followCb:d.bind(i,null,!1),renderResult:function(t,i,n,o){t.html(o+" "+n)}}),e=m.follow({entityId:t.id,entityType:t.entityType,followCls:"js-fix-follow",unfollowCls:"js-fix-unfollow",noHover:!0,followCount:t.followTotal,followCb:d.bind(i,null,!0),renderResult:function(t,i,n,o){t.html('<i class="icon-star"></i><span>'+n+"</span>")}});function i(t,i,n){"cancel"===i?(o.removeClass("js-click-unfollow").addClass("js-click-follow"),l.removeClass("js-post-unfollow").addClass("js-post-follow"),a.removeClass("js-fix-unfollow link-green").addClass("js-fix-follow")):"new"!==i&&"edit"!==i||(o.removeClass("js-click-follow").addClass("js-click-unfollow"),l.removeClass("js-post-follow").addClass("js-post-unfollow"),a.removeClass("js-fix-follow").addClass("js-fix-unfollow link-green")),"edit"!==i&&(c.update(n),s.update(n),e.update(n))}},initNote:function H(){w.click({cls:".js-post-note",needLogin:!0,call:function(){new f({title:"鼠标划线采集",width:744,content:['<div class="pop-note-tips">','<div class="pop-note-picbox">','<div class="pop-note-pic" style="display:block;"><img style="display:block;width:702px;height:546px;" src="https://uploadfiles.nowcoder.com/images/20190329/56_1553858849139_DAF280AF792FD5B906511363AE2BC39D"></div>',"</div>",'<div class="submit-btnbox"><a href="javascript:void(0);" class="btn btn-primary js-close-popup">我知道了</a></div>',"</div>"].join(""),noFooter:!0})}})},initReport:function P(){var t=this.data.post;w.click({cls:".js-post-report",call:function(){p.show({type:v.type.post,entityId:t.id})}})},initSpam:function G(){var o=this.data.post;w.click({cls:".js-post-spam",call:function(t,i){if(!s.mark(i)){var n=i.attr("data-action");h[n]({body:{pid:o.id},call:function(t){window.location.reload()},error:function(t){f.alert(t.msg)},always:function(){s.pause(i)}})}}})},initAllSpam:function U(){var o=this.data.post;w.click({cls:".js-post-all-spam",call:function(t,i){if(!s.mark(i)){var n=i.attr("data-action");f.confirm("确定将这个用户的所有帖子标记为垃圾贴，并拉黑TA吗？",function(){h[n]({body:{uid:o.authorId,type:1},call:function(t){window.location.reload()},error:function(t){f.alert(t.msg)},always:function(){s.pause(i)}})}),s.pause(i)}}})},sendMsg:function M(t){u.show({title:"发私信",content:(t?t+"\n":"")+window.location.href,receiver:{name:"牛妹",id:826546},sentCb:function(){window.location.reload()}})}})});
define("nowcoder/1.2.1225/javascripts/site/discuss/terminal/module/base",["nc","cpn"],function(t,e,n){var i=t("nc"),c=(t("cpn"),i.$),r=i.Base,s=i.Clazz,o=(i.Time,n.exports=s.create());r.extend(o.prototype,{initialize:function a(t){var e=this;e.data={user:t.user,post:t.post,comment:t.comment,info:t.info,navHeight:t.navHeight,isLogin:!!t.isLogin,isAdmin:!!t.isAdmin},e._cacheEl={},e.render&&e.render()},getContentDv:function u(){return this._getEl("contentDv",function(){return c("div.post-topic-main div.post-topic-des")})},getTitleDv:function l(){return this._getEl("titleDv",function(){return c(c("h1.discuss-title")[0])})},getPostTitle:function d(){return(this.getTitleDv().text()||"").replace(/\r|\n/g,"").replace(/\s+/g," ")},_getEl:function p(t,e){var n=this;return!n._cacheEl[t]&&(n._cacheEl[t]=e()),n._cacheEl[t]}})});
define("nowcoder/1.2.1225/javascripts/site/discuss/terminal/module/comment",["nc","cpn","ncpc","./base","../../../../core/siteConfig","../../../../action/discuss","../../../../component/cmt/index","ncPlugin/highlighter/highlighter","../../../../action/contest"],function(t,e,i){var n=t("nc"),r=t("cpn"),s=t("ncpc"),a=n.$,c=n.Base,o=n.Clazz,d=n.Str,l=n.Uri,u=n.Limit,m=n.Db,p=r.Select,h=s.Auth,f=s.Util,g=t("./base"),y=t("../../../../core/siteConfig"),C=t("../../../../action/discuss"),v=t("../../../../component/cmt/index"),w=i.exports=o.create();o.mix(w,g,null,{render:function L(){var t=this;t.initAccept(),t.initCmtWonderful(),t.initCmt(),t.initEditor(),t.initOrder()},initOrder:function x(){var i=this,t=a(".js-comment-order-type");if(0===t.length)return;var e=i.valCmtOrder(),n=new p({renderTo:t,renderBy:"replaceWith",cls:"reply-rank-oprt",size:"small",autoWidth:!0,options:[{text:'<i class="ico-discuss-reply ico-earlier"></i>默认排序',value:"1",checked:"1"===e},{text:'<i class="ico-discuss-reply ico-nearly"></i>较近在前',value:"0",checked:"0"===e},{text:'<i class="ico-discuss-reply ico-liked"></i>较赞在前',value:"2",checked:"2"===e}],change:function(){var t=this.val(),e=i.cmtList;e&&e.changeOrder(t),i.valCmtOrder(t)}});n.attachSel.getEl(0).addClass("reply-rank-oprt"),n.attachSel.attach.listen("attachShow",function(){var t=n.attachSel,e=t.getEl();e.find("li.js-option").show(),e.find("li.js-option.selected").hide()})},initAccept:function A(){var e=this,t=e.data,i=t.post,n=a("div.js-accept-list"),r=c.id(i.postType);e.cmtAcceptList=new v({renderTo:n.find(".module-body"),renderBy:"html",type:"accept",isAdmin:t.isAdmin,currentUid:t.user.ownerId,entityId:i.id,entityOwnerId:i.authorId,entityType:i.entityType,extHeight:-1*(t.navHeight+a(".js-fixed-title").outerHeight()),extParam:{101:{postType:101}}[r],fixCmtItem:function(t){i.reward&&(t.rawConfig||{}).isAccepted&&t.getEl("span.answer-time").append('<span style="margin-left:5px;">已获得'+i.reward+"牛币</span>")},listeners:{listDataChange:function(t){n[0<(t.totalCount||0)?"show":"hide"]()},wonderfulChange:function(t){e.refreshCmt([e.cmtAcceptList])},litigantChange:function(){e.refreshCmt([e.cmtAcceptList])}}})},initCmtWonderful:function T(){var t=this,e=t.data,i=e.post,n=a("div.js-wonderful-list"),r=c.id(i.postType);t.cmtWonderfulList=new v({renderTo:n.find(".module-body"),renderBy:"html",type:"wonderful",isAdmin:e.isAdmin,currentUid:e.user.ownerId,entityId:i.id,entityOwnerId:i.authorId,entityType:i.entityType,extHeight:-1*(e.navHeight+a(".js-fixed-title").outerHeight()),extParam:{101:{postType:101}}[r],listeners:{listDataChange:function(t){n[0<(t.totalCount||0)?"show":"hide"]()},wonderfulChange:function(){t.refreshCmt()},litigantChange:function(){t.refreshCmt([t.cmtWonderfulList])}}})},initCmt:function I(){var t=this,e=t.data,i=e.post,n=e.comment,r=a("div.js-comment-list"),s=c.id(i.postType);t.cmtList=new v({renderTo:r.find(".module-body"),renderBy:"html",type:"bbs",needSubReport:!0,order:t.valCmtOrder(),isAdmin:e.isAdmin,isAward:!!i.hasReward,userId:i.authorId,currentUid:e.user.ownerId,entityId:i.id,entityOwnerId:i.authorId,entityType:i.entityType,pageSize:n.pageSize,page:n.curPage,autoOpenSubCmt:!0,extHeight:-1*(e.navHeight+a(".js-fixed-title").outerHeight()),extCmts:e.info.feedAd,clsUserCard:{101:" "}[s],clsHonorLevel:{101:"rate-score#{honorLevel}"}[s],urlProfile:{101:"/acm/contest/profile/#{authorId}"}[s],extParam:{101:{postType:101}}[s],fixCmtItem:function(t){i.reward&&(t.rawConfig||{}).isAccepted&&t.getEl("span.answer-time").append('<span style="margin-left:5px;">已获得'+i.reward+"牛币</span>")},listeners:{listDataChange:function(t){var e=r.find("div.module-head h1");a(".js-post-replay span.feed-legend-num").html(t.totalCount),a(".js-fixed-title .js-post-replay span").html(t.totalCount),e.html(t.totalCount+"条回帖")},wonderfulChange:function(){t.refreshCmt([t.cmtList])},litigantChange:function(){t.refreshCmt([t.cmtList])},acceptChange:function(){t.refreshCmt()}}});var o=l.getParam("toCommentId");o&&window.setTimeout(function(){t.cmtList.scrollToId(o,!0,!0)},1e3)},initEditor:function j(){var o=this;if(!a("div.js-editor").get(0))return;f.getEditor("hEditor",function(t){var n=o.data,e=n.comment,i=a("#jsPubPoint"),r=a('<div class="warning-tips" style="display:none;"></div>');i.parent().prepend(r);var s=new t({renderTo:a("div.js-editor"),height:200,toolbarFixedTop:n.navHeight,placeholder:"在这里畅所欲言你的看法吧！",content:e.draft,disabled:!n.isLogin,needChangeEditor:!0,needAt:!0,noToolbarFixed:!n.isLogin,clickMask:function(){!n.isLogin&&h.showLogin()},draftChange:function(t){n.isLogin&&C.saveDiscussDraft({body:{entityId:n.post.id,content:t,type:y.draftType.answerPost}});var e=d.decodeHTML(t.replace(/<.*?>/g,"")),i=/1\d{10}/.test(e)||/([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+/.test(e);r[i?"show":"hide"]().html(i?'<i class="icon-warning-sign"></i>注意！不要轻易泄露自己的联系方式哦':"")},afterChangeEditor:function(t){s=t}});i.on("click",function(t){!u.mark(i)&&o.cmtList.createCmt({content:a.trim(s.val()),call:function(){s.val("")},error:function(){},always:function(){u.pause(i)}})})})},refreshCmt:function b(t){var e=this;e.cmtList&&!c.contains(t,e.cmtList)&&e.cmtList.refresh(),e.cmtAcceptList&&!c.contains(t,e.cmtAcceptList)&&e.cmtAcceptList.renderPage(1),e.cmtWonderfulList&&!c.contains(t,e.cmtWonderfulList)&&e.cmtWonderfulList.renderPage(1)},valCmtOrder:function H(t){if(0===arguments.length)return"1";({0:"0",1:"1",2:"2"})[t=c.id(t)]&&m.set("discussCmtOrder",t)}})});
define("nowcoder/1.2.1225/javascripts/site/discuss/terminal/module/content",["nc","cpn","ncpc","./base"],function(t,e,n){var i=t("nc"),a=(t("cpn"),t("ncpc")),f=i.$,o=i.Base,r=i.Clazz,d=i.Browser,c=i.MathJax,h=i.Dom,s=a.Vote,l=t("./base"),g=n.exports=r.create();r.mix(g,l,null,{render:function m(){var t=this;t.initContent(),t.initImage(),t.initVote(),t.initFlash(),t.initHref(),t.initMathJax()},initContent:function p(){var t=this.getContentDv();t.find("script").remove();var e=t.html();/<.*?>/.test(e)||(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"").replace(/\n+/g,"<br /><br />"),t.html(e))},initImage:function u(){this.getContentDv().addClass("js-nc-pop-image")},initVote:function v(){var t=this.getContentDv();o.forEach(t.find("img[data-vote-id]"),function(t){t=f(t);var e=f.trim(t.attr("data-vote-id"));!e&&t.remove(),e&&new s({renderTo:t,renderBy:"replaceWith",voteId:e})})},initFlash:function b(){if(d.flash())return;var c=f(document.body),t=this.getContentDv().find("object"),s=f('<div style="font-size:14px;text-align:center;color:#fff;position:absolute;padding:10px;overflow:hidden;background:#1c1c1c;">您的浏览器未启用 flash ，请<a class="link-green" href="https://get.adobe.com/cn/flashplayer/" target="_blank">安装</a>或者<a class="link-green" href="https://www.nowcoder.com/discuss/161012" target="_blank">启用 flash</a>（设置完成后，请重启浏览器）</div>');o.forEach(t,function(t){var e=(t=f(t)).find("embed"),n=Math.max(t.outerWidth(),e.outerWidth()),i=Math.max(t.outerHeight(),e.outerHeight()),a=Math.min(h.getPosLeft(t)||0,h.getPosLeft(e)||0),o=Math.min(h.getPosTop(t)||0,h.getPosTop(e)||0),r=f(s.get(0).cloneNode(!0));r.css("left",a).css("top",o).outerWidth(n).css("max-height",i),c.append(r)})},initHref:function x(){var t=this.getContentDv().find("a");window.setTimeout(function(){o.forEach(t,function(t){var e=(t=f(t)).attr("href");e&&-1!==e.indexOf("http")&&-1===e.indexOf("nowcoder.com")&&t.attr("target","_blank")})},1e3)},initMathJax:function w(){var t=this.getContentDv();c.image(t),c.form(t)}})});
define("nowcoder/1.2.1225/javascripts/site/discuss/terminal/module/note",["nc","cpn","ncpc","./base"],function(t,n,e){var i=t("nc"),o=(t("cpn"),t("ncpc")),l=i.$,d=i.Base,c=i.Clazz,r=(i.Time,i.Str),u=i.Db,s=o.Selection,a=t("./base"),p=e.exports=c.create();c.mix(p,a,null,{render:function v(){var t=this,n=t.data.post||{};"2"===d.id(n.postType)&&s.isSupport&&(t.initTips(),t.initSelect())},initTips:function f(){var a=this,t=a.data,p=t.post,n=a.tipsDv=l('<div class="tooltip bottom nc-req-auth" style="cursor:pointer;width:120px;position:absolute;z-index:9999;display:none;"><div class="tooltip-arrow" style="left:50%;"></div><div class="tooltip-inner">精华采集</div></div>');l(document.body).append(n),n.on("click",function(){n.hide(),t.isLogin&&a.getCpn(function(t,n){t.show({listeners:{select:function(t){t=t||{entityId:p.id,entityType:p.entityType};var n=window.location.href,e=(a.getPostTitle(),""),i="";d.forEach(a.selection.val().split("\n"),function(t){(t=l.trim(t))&&(e+="<div>"+r.encodeHTML(t)+"</div>"),t&&(i+=t+"\n")});var o=new u("ncNoteAppContent"),c=d.key(),s={mdAttach:"> ["+i+"]("+n+")",contentAttach:["<blockquote>",'<div class="notes-about-mod notes-blue-mod"><a href="',n,'" target="_blank">',e,"</a></div>","</blockquote>"].join("")};o.set(c,s,3e4),window.location.href="/note/detail/"+(t.id||"0")+"?contentAppendId="+c}}})})})},initSelect:function h(){var i=this;i.getContentDv();i.selection=new s({el:i.getContentDv(),call:function(t){var n=t.x-60,e=t.y;i.tipsDv.css("left",n).css("top",e).show()},canCancel:function(t){return!l.contains(i.tipsDv.get(0),t.get(0))},cancel:function(){i.tipsDv.hide()}})},getCpn:function y(e){t.async("../../../../component/note/popupList",function(n){t.async("../../../../component/note/popupEdit",function(t){e(n,t)})})}})});
define("nowcoder/1.2.1225/javascripts/site/discuss/terminal/module/share",["nc","cpn","./base","../../../../component/popupSub/popupCommon","../../../../core/siteConfig"],function(i,n,e){var t=i("nc"),c=(i("cpn"),t.$),o=(t.Base,t.Clazz),p=t.Share,a=t.Sys,r=(t.Dom,i("./base")),l=i("../../../../component/popupSub/popupCommon"),s=e.exports=o.create();o.mix(s,r,null,{render:function u(){var i=this;i.shareBtn=c(".js-share-oprt-item"),i.tipsDv=c(".js-share-tooltip"),i.initHover(),i.initShare()},initHover:function d(){},initShare:function f(){var i=this,n=i.tipsDv,e=c("div.post-topic-main div.post-topic-des"),t=c("h1.discuss-title");(e=c(e[0].cloneNode(!0))).find("script").remove();var o=i.fixStr(t.text()),r="「"+o+"」 "+i.fixStr(e.text()),s=100<r.length?r.substring(0,100)+"...":r;p.bind({el:n.find("a.js-share-link"),title:o,desc:s,link:window.location.href}),n.find(".js-share-wx").on("click",function(){l.wx(a.rqUrl(window.location.href))})},fixStr:function h(i){return(i||"").replace(/\r|\n/g,"").replace(/\s+/g," ")}})});
define("nowcoder/1.2.1225/javascripts/site/discuss/terminal/module/title",["nc","cpn","./base"],function(s,o,i){var e=s("nc"),h=(s("cpn"),e.$),l=(e.Base,e.Clazz),k=e.Time,m=e.Str,a=s("./base"),t=i.exports=l.create();l.mix(t,a,null,{render:function w(){var a=h(window),s=this.data,o=s.post,t=s.navHeight,n=!1,c=0,r=h("div.editor-box").closest("div.module-box"),i=h(".discuss-topic-head"),e=i.find(".discuss-title"),d=h(e.get(0).cloneNode(!0)).addClass("js-fixed-title fixed-title").css("top",t).hide().appendTo(i);d.append(m.execTpl(['<div class="discuss-tool-bar">','<a href="javascript:void(0);" class="link-gray js-fix-like nc-req-auth #{likeCls}"><i class="icon-thumbs-up"></i><span>#{likeTotal}</span></a>','<a href="javascript:void(0);" class="link-gray #{followCls}"><i class="icon-star"></i><span>#{followCount}</span></a>','<a href="javascript:void(0);" class="link-gray nc-req-auth js-post-replay"><i class="icon-comment"></i><span>#{cmtCount}</span></a>',"</div>"].join(""),{likeCls:o.isLiked?"link-green":"",followCls:o.isFollowed?"js-fix-unfollow link-green":"js-fix-follow",likeTotal:o.likeTotal||0,followCount:o.followTotal||0,cmtCount:o.cmtTotal||0}));var f=i.outerHeight(),p=d.outerHeight(),u=i.offset().top,l=k.frequency(10);function v(){l(function(){var s,o=a.scrollTop(),i=o+t,e=o<=c,l=u+f<=i+p+1;c=o,(s=!(e||!n||l)||(e&&n?u<i&&i+p<r.offset().top:l&&i+p<r.offset().top))&&!n?(n=!0,d.fadeIn(200)):!s&&n&&(d.hide(),n=!1)})}a.on("scroll",v),v()}})});